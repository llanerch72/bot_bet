{% extends "base.html" %}

{% block title %}Estad√≠sticas del bot{% endblock %}

{% block content %}
<div class="wrap">
  <h1>üìä Estad√≠sticas del bot</h1>

  <div class="card">
    <p>Total d√≠as con predicci√≥n: {{ stats.total_days }}</p>
    <p>D√≠as con payload v√°lido: {{ stats.days_with_payload }}</p>
    <p>D√≠as sin payload: {{ stats.days_without_payload }}</p>
    <p>Total de partidos analizados: {{ stats.total_matches }}</p>
    <p>Estrellas por tipo: ‚≠ê Goles {{ stats.star_type_count.goles }} ¬∑ üü® Tarjetas {{ stats.star_type_count.tarjetas }}</p>
    <p>Confianza media de picks estrella: {{ '%.2f' | format(stats.avg_star_confidence) }}</p>
  </div>

  <div class="card">
    <h2>Top picks m√°s frecuentes</h2>
    <ul>
      {% for pick, count in stats.top_picks %}
        <li>{{ pick }} ({{ count }})</li>
      {% endfor %}
    </ul>
  </div>

  <div class="card">
    <h2>Equipos m√°s analizados</h2>
    <ul>
      {% for team, count in stats.top_teams %}
        <li>{{ team }} ({{ count }})</li>
      {% endfor %}
    </ul>
  </div>

  <div class="card">
    <h2>Tendencia √∫ltimos 30 d√≠as</h2>
    <table class="standings-table">
      <thead>
        <tr>
          <th>D√≠a</th>
          <th>Partidos</th>
          <th>‚≠ê Goles</th>
          <th>üü® Tarjetas</th>
          <th>Conf. media</th>
        </tr>
      </thead>
      <tbody>
        {% for row in trend_30 %}
        <tr>
          <td>{{ row.day }}</td>
          <td>{{ row.matches }}</td>
          <td>{{ row.stars_goles }}</td>
          <td>{{ row.stars_tarjetas }}</td>
          <td>{{ '%.2f' | format(row.avg_conf) }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
