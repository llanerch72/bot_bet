{% extends "base.html" %}

{% block title %}Forma reciente de equipos{% endblock %}

{% block content %}
<div class="wrap">
  <h1>ğŸ“… Forma reciente de equipos</h1>

  <form method="get" action="/form" class="toolbar">
    <label for="team">Equipo:</label>
    <select name="team" id="team" onchange="this.form.submit()">
      <option value="">-- Selecciona un equipo --</option>
      {% for name in teams %}
        <option value="{{ name }}" {% if name == selected_team %}selected{% endif %}>{{ name }}</option>
      {% endfor %}
    </select>
  </form>

  {% if error %}
    <p class="muted">âš ï¸ Error: {{ error }}</p>
  {% endif %}

  {% if matches %}
    <div class="card" style="margin-top: 20px;">
      <h2>Ãšltimos partidos de {{ selected_team }}</h2>
      <ul>
        {% for m in matches %}
          <li>
            {{ m.fixture.date[:10] }} â€”
            {% if m.teams.home.name == selected_team %}
              <strong>(Local)</strong> {{ m.teams.home.name }} {{ m.goals.home }} - {{ m.goals.away }} {{ m.teams.away.name }}
            {% else %}
              <strong>(Visita)</strong> {{ m.teams.home.name }} {{ m.goals.home }} - {{ m.goals.away }} {{ m.teams.away.name }}
            {% endif %}

            {% if m.yellow_cards or m.red_cards %}
              â€”
              {% if m.yellow_cards %}ğŸŸ¨ {{ m.yellow_cards }}{% endif %}
              {% if m.red_cards %} ğŸŸ¥ {{ m.red_cards }}{% endif %}
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  {% if summary %}
    <div class="card" style="margin-top: 20px;">
      <h2>Resumen</h2>
      <ul>
        <li>âš½ Goles a favor: <strong>{{ summary.gf }}</strong></li>
        <li>ğŸ¥… Goles en contra: <strong>{{ summary.ga }}</strong></li>
        <li>ğŸŸ¨ Tarjetas amarillas: <strong>{{ summary.yellow_cards }}</strong></li>
        <li>ğŸŸ¥ Tarjetas rojas: <strong>{{ summary.red_cards }}</strong></li>
      </ul>
    </div>
  {% endif %}
</div>
{% endblock %}
